{"version":3,"file":"js/custom/documentation/general/datatables/subtable.js","mappings":";;;;;;;;;;AAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8BAA8B;AAChD,kBAAkB,8BAA8B;AAChD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,qBAAqB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,IAAI,IAA6B;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;UCxPD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://metronic/../demo8/src/js/custom/documentation/general/datatables/subtable.js","webpack://metronic/webpack/bootstrap","webpack://metronic/webpack/before-startup","webpack://metronic/webpack/startup","webpack://metronic/webpack/after-startup"],"sourcesContent":["\"use strict\";\r\n\r\n// Class definition\r\nvar KTDocsDatatableSubtable = function () {\r\n    var table;\r\n    var datatable;\r\n    var template;\r\n\r\n    // Private methods\r\n    const initDatatable = () => {\r\n        // Set date data order\r\n        const tableRows = table.querySelectorAll('tbody tr');\r\n\r\n        tableRows.forEach(row => {\r\n            const dateRow = row.querySelectorAll('td');\r\n            const realDate = moment(dateRow[1].innerHTML, \"DD MMM YYYY, LT\").format(); // select date from 2nd column in table\r\n\r\n            // Skip template\r\n            if (!row.closest('[data-kt-docs-datatable-subtable=\"subtable_template\"]')) {\r\n                dateRow[1].setAttribute('data-order', realDate);\r\n                dateRow[1].innerText = moment(realDate).fromNow();\r\n            }\r\n        });\r\n\r\n        // Get subtable template\r\n        const subtable = document.querySelector('[data-kt-docs-datatable-subtable=\"subtable_template\"]');\r\n        template = subtable.cloneNode(true);\r\n        template.classList.remove('d-none');\r\n\r\n        // Remove subtable template\r\n        subtable.parentNode.removeChild(subtable);\r\n\r\n        // Init datatable --- more info on datatables: https://datatables.net/manual/\r\n        datatable = $(table).DataTable({\r\n            \"info\": false,\r\n            'order': [],\r\n            \"lengthChange\": false,\r\n            'pageLength': 6,\r\n            'ordering': false,\r\n            'paging': false,\r\n            'columnDefs': [\r\n                { orderable: false, targets: 0 }, // Disable ordering on column 0 (checkbox)\r\n                { orderable: false, targets: 6 }, // Disable ordering on column 6 (actions)\r\n            ]\r\n        });\r\n\r\n        // Re-init functions on every table re-draw -- more info: https://datatables.net/reference/event/draw\r\n        datatable.on('draw', function () {\r\n            resetSubtable();\r\n            handleActionButton();\r\n        });\r\n    }\r\n\r\n    // Subtable data sample\r\n    const data = [\r\n        {\r\n            image: '76',\r\n            name: 'Go Pro 8',\r\n            description: 'Latest  version of Go Pro.',\r\n            cost: '500.00',\r\n            qty: '1',\r\n            total: '500.00',\r\n            stock: '12'\r\n        },\r\n        {\r\n            image: '60',\r\n            name: 'Bose Earbuds',\r\n            description: 'Top quality earbuds from Bose.',\r\n            cost: '300.00',\r\n            qty: '1',\r\n            total: '300.00',\r\n            stock: '8'\r\n        },\r\n        {\r\n            image: '211',\r\n            name: 'Dry-fit Sports T-shirt',\r\n            description: 'Comfortable sportswear for everyday use.',\r\n            cost: '89.00',\r\n            qty: '1',\r\n            total: '89.00',\r\n            stock: '18'\r\n        },\r\n        {\r\n            image: '21',\r\n            name: 'Apple Airpod 3',\r\n            description: 'Apple\\'s latest and most advanced earbuds.',\r\n            cost: '200.00',\r\n            qty: '2',\r\n            total: '400.00',\r\n            stock: '32'\r\n        },\r\n        {\r\n            image: '83',\r\n            name: 'Nike Pumps',\r\n            description: 'Apple\\'s latest and most advanced headphones.',\r\n            cost: '200.00',\r\n            qty: '1',\r\n            total: '200.00',\r\n            stock: '8'\r\n        }\r\n    ];\r\n\r\n    // Handle action button\r\n    const handleActionButton = () => {\r\n        const buttons = document.querySelectorAll('[data-kt-docs-datatable-subtable=\"expand_row\"]');\r\n\r\n        // Sample row items counter --- for demo purpose only, remove this variable in your project\r\n        const rowItems = [4, 1, 5, 1, 4, 2];\r\n\r\n        buttons.forEach((button, index) => {\r\n            button.addEventListener('click', e => {\r\n                e.stopImmediatePropagation();\r\n                e.preventDefault();\r\n\r\n                const row = button.closest('tr');\r\n                const rowClasses = ['isOpen', 'border-bottom-0'];\r\n\r\n                // Get total number of items to generate --- for demo purpose only, remove this code snippet in your project\r\n                const demoData = [];\r\n                for (var j = 0; j < rowItems[index]; j++) {\r\n                    demoData.push(data[j]);\r\n                }\r\n                // End of generating demo data\r\n\r\n                // Handle subtable expanded state\r\n                if (row.classList.contains('isOpen')) {\r\n                    // Remove all subtables from current order row\r\n                    while (row.nextSibling && row.nextSibling.getAttribute('data-kt-docs-datatable-subtable') === 'subtable_template') {\r\n                        row.nextSibling.parentNode.removeChild(row.nextSibling);\r\n                    }\r\n                    row.classList.remove(...rowClasses);\r\n                    button.classList.remove('active');\r\n                } else {\r\n                    populateTemplate(demoData, row);\r\n                    row.classList.add(...rowClasses);\r\n                    button.classList.add('active');\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // Populate template with content/data -- content/data can be replaced with relevant data from database or API\r\n    const populateTemplate = (data, target) => {\r\n        data.forEach((d, index) => {\r\n            // Clone template node\r\n            const newTemplate = template.cloneNode(true);\r\n\r\n            // Stock badges\r\n            const lowStock = `<div class=\"badge badge-light-warning\">Low Stock</div>`;\r\n            const inStock = `<div class=\"badge badge-light-success\">In Stock</div>`;\r\n\r\n            // Select data elements\r\n            const image = newTemplate.querySelector('[data-kt-docs-datatable-subtable=\"template_image\"]');\r\n            const name = newTemplate.querySelector('[data-kt-docs-datatable-subtable=\"template_name\"]');\r\n            const description = newTemplate.querySelector('[data-kt-docs-datatable-subtable=\"template_description\"]');\r\n            const cost = newTemplate.querySelector('[data-kt-docs-datatable-subtable=\"template_cost\"]');\r\n            const qty = newTemplate.querySelector('[data-kt-docs-datatable-subtable=\"template_qty\"]');\r\n            const total = newTemplate.querySelector('[data-kt-docs-datatable-subtable=\"template_total\"]');\r\n            const stock = newTemplate.querySelector('[data-kt-docs-datatable-subtable=\"template_stock\"]');\r\n\r\n            // Populate elements with data\r\n            const imageSrc = image.getAttribute('src');\r\n            image.setAttribute('src', imageSrc + d.image + '.gif');\r\n            name.innerText = d.name;\r\n            description.innerText = d.description;\r\n            cost.innerText = d.cost;\r\n            qty.innerText = d.qty;\r\n            total.innerText = d.total;\r\n            if (d.stock > 10) {\r\n                stock.innerHTML = inStock;\r\n            } else {\r\n                stock.innerHTML = lowStock;\r\n            }\r\n\r\n            // New template border controller\r\n            // When only 1 row is available\r\n            if (data.length === 1) {\r\n                let borderClasses = ['rounded', 'rounded-end-0'];\r\n                newTemplate.querySelectorAll('td')[0].classList.add(...borderClasses);\r\n                borderClasses = ['rounded', 'rounded-start-0'];\r\n                newTemplate.querySelectorAll('td')[4].classList.add(...borderClasses);\r\n\r\n                // Remove bottom border\r\n                newTemplate.classList.add('border-bottom-0');\r\n            } else {\r\n                // When multiple rows detected\r\n                if (index === (data.length - 1)) { // first row\r\n                    let borderClasses = ['rounded-start', 'rounded-bottom-0'];\r\n                    newTemplate.querySelectorAll('td')[0].classList.add(...borderClasses);\r\n                    borderClasses = ['rounded-end', 'rounded-bottom-0'];\r\n                    newTemplate.querySelectorAll('td')[4].classList.add(...borderClasses);\r\n                }\r\n                if (index === 0) { // last row\r\n                    let borderClasses = ['rounded-start', 'rounded-top-0'];\r\n                    newTemplate.querySelectorAll('td')[0].classList.add(...borderClasses);\r\n                    borderClasses = ['rounded-end', 'rounded-top-0'];\r\n                    newTemplate.querySelectorAll('td')[4].classList.add(...borderClasses);\r\n\r\n                    // Remove bottom border on last row\r\n                    newTemplate.classList.add('border-bottom-0');\r\n                }\r\n            }\r\n\r\n            // Insert new template into table\r\n            const tbody = table.querySelector('tbody');\r\n            tbody.insertBefore(newTemplate, target.nextSibling);\r\n        });\r\n    }\r\n\r\n    // Reset subtable\r\n    const resetSubtable = () => {\r\n        const subtables = document.querySelectorAll('[data-kt-docs-datatable-subtable=\"subtable_template\"]');\r\n        subtables.forEach(st => {\r\n            st.parentNode.removeChild(st);\r\n        });\r\n\r\n        const rows = table.querySelectorAll('tbody tr');\r\n        rows.forEach(r => {\r\n            r.classList.remove('isOpen');\r\n            if (r.querySelector('[data-kt-docs-datatable-subtable=\"expand_row\"]')) {\r\n                r.querySelector('[data-kt-docs-datatable-subtable=\"expand_row\"]').classList.remove('active');\r\n            }\r\n        });\r\n    }\r\n\r\n    // Public methods\r\n    return {\r\n        init: function () {\r\n            table = document.querySelector('#kt_docs_datatable_subtable');\r\n\r\n            if (!table) {\r\n                return;\r\n            }\r\n\r\n            initDatatable();\r\n            handleActionButton();\r\n        }\r\n    }\r\n}();\r\n\r\n// Webpack support\r\nif (typeof module !== 'undefined') {\r\n    module.exports = KTDocsDatatableSubtable;\r\n}\r\n\r\n// On document ready\r\nKTUtil.onDOMContentLoaded(function () {\r\n    KTDocsDatatableSubtable.init();\r\n});\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"../demo8/src/js/custom/documentation/general/datatables/subtable.js\");\n",""],"names":[],"sourceRoot":""}